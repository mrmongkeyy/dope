const header=makeElement("header",{addChildShoudlBeIgnored:!0,style:"\n\t\tdisplay:flex;\n\t\theight:10%;\n\t\talign-items:center;\n\t\tborder-bottom:1px solid white;\n\t\tbackground:#05274a;\n\t\tcolor:white;\n\t\tjustify-content:space-between;\n\t",innerHTML:'\n\t\t<div\n\t\tstyle="\n\t\t\tmargin-left:20px;\n\t\t\tdisplay:flex;\n\t\t\twidth:50%;\n\t\t\talign-items:center;\n\t\t"\n\t\t>\n\t\t\t<div\n\t\t\tstyle="\n\t\t\t\tdisplay:flex;\n\t\t\t\talign-items:center;\n\t\t\t\tmargin-right:5px;\n\t\t\t"\n\t\t\t>\n\t\t\t\t<img src=/file?fn=logos.png\n\t\t\t\tstyle="\n\t\t\t\t\twidth:32px;\n\t\t\t\t\theight:29px;\n\t\t\t\t"\n\t\t\t\t>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<span\n\t\t\t\tstyle="\n\t\t\t\t\tfont-size:20px;\n\t\t\t\t"\n\t\t\t\t>SuitUpChatter</span><br>\n\t\t\t\t<span>The Drama of Personas.</span>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t\t<div\n\t\tstyle="\n\t\t\tmargin-right:20px;\n\t\t"\n\t\t>\n\t\t\t<span id=placeId>ID: loading...</span>\n\t\t</div>\n\t',onadded(){}}),content=makeElement("content",{style:"\n\t\tdisplay:flex;\n\t\theight:80%;\n\t\talign-items:center;\n\t\tjustify-content:center;\n\t\tflex-direction:column;\n\t\tbackground:#05274a;\n\t",innerHTML:'\n\t\t<div\n\t\tstyle="\n\t\t\tfont-weight:bold;\n\t\t\tpadding:20px;\n\t\t\tbackground:#04192f;\n\t\t"\n\t\t>\n\t\t\t<div\n\t\t\tstyle="\n\t\t\t\ttext-align:center;\n\t\t\t"\n\t\t\t>\n\t\t\t\t<img src=/file?fn=logos.png\n\t\t\t\tstyle="\n\t\t\t\t\tpadding:5px;\n\t\t\t\t\twidth:100px;\n\t\t\t\t"\n\t\t\t\t>\n\t\t\t</div>\n\t\t\t<div\n\t\t\tstyle="\n\t\t\t\tmargin-top:20px;\n\t\t\t\twidth:auto;\n\t\t\t\tpadding:10px;\n\t\t\t\tbackground:white;\n\t\t\t"\n\t\t\t>\n\t\t\t\t<span\n\t\t\t\t>Anda bermain atas kemauan sendiri.</span>\n\t\t\t</div>\n\t\t\t<div\n\t\t\tstyle="\n\t\t\t\tmargin-top:10px;\n\t\t\t\tpadding:15px 0;\n\t\t\t"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tbackground:#465fac;\n\t\t\t\t\t\tcolor:white;\n\t\t\t\t\t\tpadding:10px;\n\t\t\t\t\t\tcursor:pointer;\n\t\t\t\t\t"\n\t\t\t\t\tid=fightbutton\n\t\t\t\t\t>Main</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t',onadded(){const t=function(){const t=`rooms/${userId}`;header.myroom=firebase.database().ref(t),header.myroom.on("child_added",()=>{header.chatRoom=firebase.database().ref(`chat/${userId}/0`),header.myroom.get().then(t=>{const n=t.val()[1];n&&(header.update({owner:!0,opponent:n,addChildShoudlBeIgnored:!1}),JoinProcess())})})};this.find("#fightbutton").onclick=(()=>{header.readyState&&find("main").addChild(openLoading("Bersiap...",n=>{const e={};roomRef.get().then(n=>{const i=n.val();if(i){let n,e=null;for(let t in i)if(!i[t][1]){e=i[t],n=t;break}e?(e.push(userId),header.myroom=firebase.database().ref("rooms/"+n),header.myroom.set(e).then(()=>{header.chatRoom=firebase.database().ref(`chat/${n}/0`),header.update({chatRoom:firebase.database().ref(`chat/${n}/0`),opponent:n,addChildShoudlBeIgnored:!1}),JoinProcess()})):(i[userId]=[userId],roomRef.set(i).then(()=>{t()}))}else e[userId]=[userId],roomRef.set(e).then(()=>{t()})})}))})}}),JoinProcess=function(t){find("#loadingDiv").remove(),content.clear(),content.addChild(makeElement("div",{style:"\n\t\t\twidth:100%;\n\t\t\theight:100%;\n\t\t\tdisplay:flex;\n\t\t\tflex-direction:column;\n\t\t",innerHTML:'\n\t\t\t<div\n\t\t\tstyle="\n\t\t\t\tpadding:20px;\n\t\t\t\tfont-weight:bold;\n\t\t\t\tdisplay:flex;\n\t\t\t\tjustify-content:center;\n\t\t\t\tbackground:#05274a;\n\t\t\t"\n\t\t\t>\n\t\t\t\t<div id=morebutton\n\t\t\t\tstyle="\n\t\t\t\t\tdisplay:none;\n\t\t\t\t\talign-items:center;\n\t\t\t\t"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tmargin-right:5px;\n\t\t\t\t\t"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tpadding:5px;\n\t\t\t\t\t\t\tbackground:#465fac;\n\t\t\t\t\t\t\tcolor:white;\n\t\t\t\t\t\t\tcursor:pointer;\n\t\t\t\t\t\t"\n\t\t\t\t\t\tid=rematch\n\t\t\t\t\t\t>Rematch</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tpadding:5px;\n\t\t\t\t\t\t\tbackground:#465fac;\n\t\t\t\t\t\t\tcolor:white;\n\t\t\t\t\t\t\tcursor:pointer;\n\t\t\t\t\t\t"\n\t\t\t\t\t\tid=newgame\n\t\t\t\t\t\t>New game</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id=timer\n\t\t\t\tstyle="\n\t\t\t\t\tpadding:5px;\n\t\t\t\t\tbackground:#04192f;\n\t\t\t\t\tcolor:white;\n\t\t\t\t\tmargin-left:5px;\n\t\t\t\t"\n\t\t\t\t>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t180s left.\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\tstyle="\n\t\t\t\theight:90%;\n\t\t\t\tdisplay:flex;\n\t\t\t\talign-items:center;\n\t\t\t\tjustify-content:center;\n\t\t\t\tbackground:#05274a;\n\t\t\t"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\tstyle="\n\t\t\t\t\theight:100%;\n\t\t\t\t\tdisplay:flex;\n\t\t\t\t\talign-items:center;\n\t\t\t\t\tjustify-content:flex-start;\n\t\t\t\t\tflex-direction:column;\n\t\t\t\t\tmargin-right:5px;\n\t\t\t\t\tbackground:#05274a;\n\t\t\t\t"\n\t\t\t\tid=choosebucket\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tmargin:10px;\n\t\t\t\t\t\twidth:150px;\n\t\t\t\t\t\theight:150px;\n\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\tjustify-content:center;\n\t\t\t\t\t\tcursor:pointer;\n\t\t\t\t\t\tflex-direction:column;\n\t\t\t\t\t\tmargin-top:0;\n\t\t\t\t\t"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img src=/file?fn=scisors.png\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\twidth:64px;\n\t\t\t\t\t\t\theight:64px;\n\t\t\t\t\t\t\tborder-radius:50%;\n\t\t\t\t\t\t"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<span value=0\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tcolor:#00f3ff;\n\t\t\t\t\t\t\tmargin-top:5px;\n\t\t\t\t\t\t">Scisors</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tmargin:10px;\n\t\t\t\t\t\twidth:150px;\n\t\t\t\t\t\theight:150px;\n\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\tjustify-content:center;\n\t\t\t\t\t\tcursor:pointer;\n\t\t\t\t\t\tflex-direction:column;\n\t\t\t\t\t\tmargin-top:0;\n\t\t\t\t\t"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img src=/file?fn=rock.png\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\twidth:64px;\n\t\t\t\t\t\t\theight:64px;\n\t\t\t\t\t\t\tborder-radius:50%;\n\t\t\t\t\t\t"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<span value=1\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tcolor:#00f3ff;\n\t\t\t\t\t\t\tmargin-top:5px;\n\t\t\t\t\t\t">Rock</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\tstyle="\n\t\t\t\t\t\twidth:150px;\n\t\t\t\t\t\theight:150px;\n\t\t\t\t\t\tmargin:10px;\n\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\tjustify-content:center;\n\t\t\t\t\t\tcursor:pointer;\n\t\t\t\t\t\tflex-direction:column;\n\t\t\t\t\t\tmargin-top:0;\n\t\t\t\t\t"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img src=/file?fn=paper.png\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\twidth:64px;\n\t\t\t\t\t\t\theight:64px;\n\t\t\t\t\t\t\tborder-radius:50%;\n\t\t\t\t\t\t"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<span value=2\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tcolor:#00f3ff;\n\t\t\t\t\t\t\tmargin-top:5px;\n\t\t\t\t\t\t"\n\t\t\t\t\t\t>Paper</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\tstyle="\n\t\t\t\t\theight:100%;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\tdisplay:flex;flex-direction:column;\n\t\t\t\t\tjustify-content:space-between;\n\t\t\t\t\talign-items:center;\n\t\t\t\t\tpadding:0 10px;\n\t\t\t\t\tmargin-left:5px;\n\t\t\t\t\tbackground:#05274a;\n\t\t\t\t"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tpadding:10px;\n\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\tjustify-content:flex-start;\n\t\t\t\t\t\twidth:100%;\n\t\t\t\t\t\tpadding-top:0;\n\t\t\t\t\t"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tpadding:10px;\n\t\t\t\t\t\t\tmargin-right:2px;\n\t\t\t\t\t\t\tfont-weight:bold;\n\t\t\t\t\t\t"\n\t\t\t\t\t\tplaceholder="Tulis pesanmu disini..."\n\t\t\t\t\t\t><button\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tpadding:10px;\n\t\t\t\t\t\t\tbackground:#465fac;\n\t\t\t\t\t\t\tcolor:white;\n\t\t\t\t\t\t"\n\t\t\t\t\t\tid=sendButton\n\t\t\t\t\t\t>Send</button>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tpadding:10px;\n\t\t\t\t\t\t\tmargin-left:5px;\n\t\t\t\t\t\t\twidth:100%;\n\t\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\t\tjustify-content:flex-end;\n\t\t\t\t\t\t"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\tpadding:10px;\n\t\t\t\t\t\t\t\tbackground:#465fac;\n\t\t\t\t\t\t\t\tcolor:white;\n\t\t\t\t\t\t\t"\n\t\t\t\t\t\t\tid=clearChatBox\n\t\t\t\t\t\t\t>Clear</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\tstyle="\n\t\t\t\t\t\theight:100%;\n\t\t\t\t\t\twidth:100%;\n\t\t\t\t\t\toverflow:auto;\n\t\t\t\t\t\tbackground:#04192f;\n\t\t\t\t\t\tmargin-bottom:10px;\n\t\t\t\t\t"\n\t\t\t\t\tid=chatBox\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tpadding:10px 10px 0 10px;\n\t\t\t\t\t\t\tmargin-bottom:5px;\n\t\t\t\t\t\t\tcolor:white;\n\t\t\t\t\t\t"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\tfont-weight:bold;\n\t\t\t\t\t\t\t\tcolor:#00f3ff;\n\t\t\t\t\t\t\t"\n\t\t\t\t\t\t\t>System</span> Talk to your opponent, read the personalities, manipulate, then beat him.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t',onadded(){let t;header.myroom.on("child_added",t=>{header.myroom.get().then(async t=>{let n=t.val();if(n[4])n=n.slice(0,2),header.sendRematch&&await header.myroom.set(n),i=180,hideElement(find("#morebutton")),header.theBox.classList.remove("choosed"),header.update({clicked:!1,restTime:!1,timesUp:!1,onWinner:null,sendRematch:!1}),header.rematch=!0;else if(n[3]&&n[3]!==userId)rematchHandler();else if(n[2]){if(header.sendRematch)return;d(this,`${n[2][0][1]===userId?"You":"Opponent"} just set the jutsu!`,"System")}})}),header.onUserLeave=(async()=>{await header.myroom.remove(),await header.chatRoom.remove(),d(this,"Opponent just leave you alone!","System"),d(this,`${void 0===header.winner?"You win! yayy! ":""}Reloading in 5s.`,"System"),i=5,header.userLeave=!0}),header.chatRoom.on("value",()=>{header.chatRoom.get().then(t=>{const n=t.toJSON();n.from!=userId&&d(this,n.msg,"Opponent")})});const n={rematch(t){header.userLeave?d(t,"Cannot, Sending Rematch request.","System"):header.myroom.get().then(n=>{const e=n.val();e.push(userId),header.sendRematch=!0,header.myroom.set(e).then(()=>{d(t,"Rematch request sended! Waiting for the response.","System")})})},newgame(){location.reload()}};this.findall("#morebutton span").forEach(t=>{t.onclick=(()=>{n[t.id](this)})}),this.findall("#choosebucket div").forEach(n=>{n.onclick=(()=>{if(header.clicked||header.timesUp)return;t=n;const i=n.querySelector("span").getAttribute("value");setJutsu(i,()=>{header.clicked=!0,n.classList.add("choosed"),header.theBox=n,header.onWinner=(async()=>{d(this,`${null===header.winner?"Draw":header.winner===userId?"You win":"You loze"}!`,"System"),e()})})})});const e=()=>{d(this,"Rest time 60s","System"),showElement(find("#morebutton"),"flex"),header.restTime=!0,i=60};let i=180;const a=setInterval(async()=>{if(i-=1,this.find("#timer").innerHTML=`${i}s left.`,i<=0)if(header.timesUp=!0,header.userLeave)location.reload();else if(header.restTime){clearInterval(a);header.roomid;await header.myroom.remove(),header.owner&&await header.chatRoom.remove(),await userRef.remove(),location.reload()}else d(this,`${header.clicked?"You Win":header.opponentSetted?"You Loze":"Draw"}!`,"System"),e()},1e3),d=function(t,n,e){const i=makeElement("div",{style:"\n\t\t\t\t\t\tpadding:0 10px;\n\t\t\t\t\t\tmargin-bottom:5px;\n\t\t\t\t\t\tcolor:white;\n\t\t\t\t\t",innerHTML:`\n\t\t\t\t\t\t<span\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tfont-weight:bold;\n\t\t\t\t\t\t\tcolor:#00f3ff;\n\t\t\t\t\t\t"\n\t\t\t\t\t\t>${e}</span> ${n}\n\t\t\t\t\t`});t.find("#chatBox").appendChild(i),i.scrollIntoView()};this.find("#sendButton").onclick=(()=>{if(header.userLeave)return void d(this,"You alone, cannot send the message.","System");const t=this.find("input").value.length<1?"Nope...":this.find("input").value,n={msg:t,from:userId};header.chatRoom.set(n).then(()=>{this.find("input").value="",d(this,t,"You")})}),this.find("#clearChatBox").onclick=(()=>{this.find("#chatBox").querySelectorAll("div").forEach((t,n)=>{0===n?t.innerHTML='\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\tfont-weight:bold;\n\t\t\t\t\t\t\t\tcolor:#00f3ff;\n\t\t\t\t\t\t\t"\n\t\t\t\t\t\t\t>System</span> Chat cleared.\n\t\t\t\t\t\t':t.remove()})}),this.find("input").onfocus=(()=>{this.find("input").onkeydown=(t=>{13===t.keyCode&&this.find("#sendButton").click()})})}}))},rematchHandler=function(){find("main").addChild(makeElement("div",{style:"\n\t\t\tbackground:rgb(0,0,0,0.5);\n\t\t\tposition:absolute;\n\t\t\twidth:100%;\n\t\t\theight:100%;\n\t\t\ttop:0;\n\t\t\tleft:0;\n\t\t\tdisplay:flex;\n\t\t\talign-items:center;\n\t\t\tjustify-content:center;\n\t\t",innerHTML:'\n\t\t\t<div\n\t\t\tstyle="\n\t\t\t\tpadding:20px;\n\t\t\t\tbackground:#05274a;\n\t\t\t"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\tstyle="\n\t\t\t\t\tpadding:10px;\n\t\t\t\t\tcolor:white;\n\t\t\t\t\tfont-weight:bold;\n\t\t\t\t"\n\t\t\t\t>\n\t\t\t\t\t<span>Rematch Request!</span>\n\t\t\t\t</div>\n\t\t\t\t<div id=buttons\n\t\t\t\tstyle="\n\t\t\t\t\tdisplay:flex;\n\t\t\t\t\talign-items:center;\n\t\t\t\t\tjustify-content:center;\n\t\t\t\t"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tpadding: 5px;\n\t\t\t\t\t\tbackground: #465fac;\n\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span id=yes>Yes</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tpadding: 5px;\n\t\t\t\t\t\tbackground: #465fac;\n\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span id=no>No</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t',onadded(){const t={yes(t){header.myroom.get().then(n=>{const e=n.val();e.push(userId),header.myroom.set(e).then(()=>{t.remove()})})},no(){location.reload()}};this.findall("#buttons span").forEach(n=>{n.onclick=(()=>{t[n.id](this)})})}}))},setJutsu=function(t,n){header.myroom.get().then(i=>{let a=i.val();a[2]?(a[2][1]=[t,userId],e(a[2])):(a[2]=[[t,userId]],header.rematch&&header.setted||(firebase.database().ref(`rooms/${header.myroom.key}/2`).on("child_added",t=>{const n=t.val();n[1]!=userId&&header.myroom.get().then(t=>{const i=t.val();i[2].push(n),e(i[2])})}),header.setted=!0)),header.myroom.set(a).then(()=>{n&&n()})});const e=function(t){let n=null,e=[[Number(t[0][0]),t[0][1]],[Number(t[1][0]),t[1][1]]];e[0][0]!=e[1][0]&&(e[0][0]+e[1][0]===1?n=1===e[0][0]?0:1:e[0][0]+e[1][0]===3?n=2===e[0][0]?0:1:e[0][0]+e[1][0]===2&&(n=0===e[0][0]?0:1)),header.winner=null===n?null:e[n][1],setTimeout(()=>{header.onWinner()},1e3)}};